import{C as O,F as E,I as P,T as A,U as L,a as M,c as R,b as k,d as _,e as I,f as b,g as U,h as B,i as N,j as T,k as W,l as $,m as j,n as D,o as x,p as F,q as H,r as q,s as z,t as K,u as Q,v as V,w as G,x as J,y as X,z as Y,A as Z,B as ee,D as te,E as oe,G as re,H as se,J as ne,K as ae,L as ie,M as ce,N as le,O as de,P as ue,Q as ge,R as me,S as h,V as pe,W as fe,X as we,Y as he,Z as ye,_ as ve,$ as Se}from"./index.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}})();const Ce="modulepreload",Oe=function(s,o){return new URL(s,o).href},f={},Ee=function(o,a,i){if(!a||a.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(a.map(e=>{if(e=Oe(e,i),e in f)return;f[e]=!0;const r=e.endsWith(".css"),C=r?'[rel="stylesheet"]':"";if(!!i)for(let c=t.length-1;c>=0;c--){const l=t[c];if(l.href===e&&(!r||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${C}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":Ce,r||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),r)return new Promise((c,l)=>{n.addEventListener("load",c),n.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o()).catch(e=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e})},Pe=Object.freeze(Object.defineProperty({__proto__:null,Counter:O,Float64:E,Int:P,Text:A,Uint:L,applyChanges:M,change:R,changeAt:k,clone:_,decodeChange:I,decodeSyncMessage:b,decodeSyncState:U,deleteAt:B,diff:N,dump:T,emptyChange:W,encodeChange:$,encodeSyncMessage:j,encodeSyncState:D,equals:x,free:F,from:H,generateSyncMessage:q,getActorId:z,getAllChanges:K,getBackend:Q,getChanges:V,getConflicts:G,getHeads:J,getHistory:X,getLastLocalChange:Y,getMissingDeps:Z,getObjectId:ee,init:te,initSyncState:oe,insertAt:re,isAutomerge:se,load:ne,loadIncremental:ae,merge:ie,next:ce,receiveSyncMessage:le,save:de,saveIncremental:ue,saveSince:ge,toJS:me,use:h,uuid:pe,view:fe},Symbol.toStringTag,{value:"Module"})),Ae="automerge:3eN8pFkgzEePzQVKjQCA9t6jyX67";async function Le(){const s=await navigator.serviceWorker.register("service-worker.js",{type:"module"});console.log("ServiceWorker registration successful with scope:",s.scope)}async function Me(){return await we,h(Se),new he({storage:new ye,network:[],peerId:"frontend-"+Math.round(Math.random()*1e4),sharePolicy:async o=>o.includes("service-worker")})}function y(s){if(!navigator.serviceWorker.controller)throw new Error("No service worker is controlling this tab right now.");const o=new MessageChannel;s.networkSubsystem.addNetworkAdapter(new ve(o.port1)),navigator.serviceWorker.controller.postMessage({type:"INIT_PORT"},[o.port2])}await Le();const g=await Me();y(g);navigator.serviceWorker.oncontrollerchange=function(){console.log("Controller changed!"),y(g)};window.repo=g;window.Automerge=window.automerge=Pe;window.process={env:{DEBUG_COLORS:"false"},browser:!0,versions:{},stderr:{},cwd:()=>"."};const v=new URLSearchParams(window.location.search).get("app")||Ae,d=window.appHandle=g.find(v);console.log(`Booting from module at: ${v}`);const S=await d.doc();if(!S)throw new Error(`Failed to load ${d.url}: ${d.state}`);let{importMap:m,name:w,module:p}=S;if(!m||!w||!p)throw new Error("Essential data missing from bootstrap document:",w,p,m);console.log("Applying import map...");window.esmsInitOptions={shimMode:!0,mapOverrides:!0};await Ee(()=>import("./es-module-shims.js").then(s=>s.e),["./es-module-shims.js","./index.js"],import.meta.url);importShim.addImportMap(m);console.log("Importing...");const Re=`./automerge-repo/${d.url}/fileContents/${p}`,ke=new URL(Re,window.location).toString(),u=await importShim(ke);console.log("Module imported:",u);u.mount||console.error("Root module doesn't export a mount function",u);const _e=new URLSearchParams(window.location.search),Ie=Object.fromEntries(_e.entries());u.mount(document.getElementById("root"),Ie);
